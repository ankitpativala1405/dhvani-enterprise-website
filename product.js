let data = [
  { "id": 0,
    "title": "DHVANI ENTERPRISE Portable Mini Sealing Machine, Handheld Packet Sealer for Food, Snacks, Chips, Fresh Storage, Plastic Bags Sealing Machine,(MULTICOLOR)",
    "price": "199",
    "MRP": "406",
    "category":"Home & Living & kitchenware",
    "subcategory":"kitchenware",
    "sku":"usb sealer machine",
    "image1": "./PHOTO/product photo/0/1.jpg",
    "image2": "./PHOTO/product photo/0/2.jpg", 
    "image3": "./PHOTO/product photo/0/3.jpg", 
    "image4": "./PHOTO/product photo/0/4.jpg",
    "image5": "./PHOTO/product photo/0/5.jpg", 
    "image6": "./PHOTO/product photo/0/6.jpg",
    "image7": "./PHOTO/product photo/0/7.jpg", 
    "image8": "./PHOTO/product photo/0/8.jpg", 
    "bullet1": "ðŸ’– This mini bag sealer is a heat bag sealer, and also a bag opener. You can seal bags easily and keep your food fresh, also with the built-in sharp stainless steel blade to open the bags conveniently. 2-in-1 machine. Enjoy your fresh and crispy snacks.",
    "bullet2": "ðŸ’– built-in With a 400mAh battery, the rechargeable hot bond bag sealer comes with a micro USB cable(included), so there is no need to buy extra AA batteries for this chip sealer, save your money and protect the environment.",
    "bullet3": "ðŸ’– This food bag sealer is suitable for packages of chips, cookies, salad, pet foods, etc., as well as for packages of salad and vacuum bags, a must-have in daily life and kitchen cooking scenarios. Not for cling films, cellophane bags, kraft paper bags, or pure aluminum bags.",
    "bullet4": "ðŸ’– Compared with the old sealer machine, the powerful and efficient heating unit can quickly heat and keep to a working temperature of 0.1s. Turn on the switch, no need to wait, and the sealer directly seals the package firmly.", 
    "bullet5": "ðŸ’– Easy To Place & Portable: With the magnet on the back, the delicate mini bag resealer can be attached to the refrigerator, space-saving in the house and not missing anymore. Only 0.2 pounds is also easy to carry outdoors for picnics, camping trips, etc.", 
    "bullet6": "",
    "bullet7": "",
    "bullet8": "", 
    "Descrip1": "The vacuum sealing process removes all of the air from your bags or containers so that you can preserve food longer without worrying about freezer burn ruining your favorite foods! The bag sealer also has the switch button function and supports USB charging! Never worry about the unsuitable battery and unstable voltage again.", 
    "Descrip2": "The kitchen gadgets can resist food waste. It helps you store the remaining snacks, food, cookies, pet food, sauce bags, and nuts. This plastic sealer is suitable for chip bags, vacuum sealer bags, cookie bags, pet food bags, and other PP, PE, and PVC bags.", 
    "Descrip3": "1.Fully charge the battery before use.<br>Plug the portable heat sealer into the power cord to starr charging. When charging, the indicator red light will be on for a long time, and when fully charged, the indicatior red ligjt will be off. At this point you can start using the product.",
    "Descrip4": "2. Open switch button.<br>Toggle the push button forward to turn on the machine, the indicator light blue light is long.", 
    "Descrip5": "3.Preheat the machine.<br>Before the first use, it needs to be pressed for 5 seconds to warm up, and then it can be used. Please note that it only needs to be preheated before the first use, and it can be used directly afterwards.",
    "Descrip6": "4.Press to seal the bag<br>Then simply press the knob and make it move equably. along the edge of any bag and it's sealed airtight.", 
    "Descrip7": "And it have hidden blade. Put the bag into the opening of the sealing machine; press down the button to open the bag and slide to the right to complete the opening.", 
    "Descrip8": "",
    "Descrip9": "", 
    "Descrip10": "",
    "Descrip11": "", 
    "Descrip12": "",
     "status":"pending" },
    { 
    "id": 1, 
    "title": "DHVANI ENTERPRISE Women's Faux Georgette Stitched Top With Unstitched Santoon Bottom and Dupatta Full Sleeve Embroidered Anarkali Gown", 
    "price": "599", 
    "MRP": "2199", 
    "category": "clothing", 
    "subcategory": "gown", 
    "sku":"Anarkali gown(parrot green)",
    "image1": "./PHOTO/product photo/1/1.jpg", 
    "image2": "./PHOTO/product photo/1/2.jpg", 
    "image3": "./PHOTO/product photo/1/3.jpg", 
    "image4": "./PHOTO/product photo/1/4.jpg", 
    "image5": "./PHOTO/product photo/1/5.jpg", 
    "image6": "./PHOTO/product photo/1/6.jpg", 
    "image7": "./PHOTO/product photo/1/7.jpg", 
    "image8": "./PHOTO/product photo/1/8.jpg", 
    "bullet1": "ðŸ’– Top: Heavy Faux Georgette With Embroidered Work With Stone, Size: Max Up To 48 Inches Length: Max Up To 52 Inches", 
    "bullet2": "ðŸ’– Bottom: Heavy Santoon, Length: 2 MTR, Type: Unstitched", 
    "bullet3": "ðŸ’– Dupatta: Heavy Butterfly Net With Embroidery Work With Latkan, Size: 2.20 MTR, Sleeve; Faux Georgette With Embroidered Work", 
    "bullet4": "ðŸ’– Type: Semi Stitched, Wash Care: First Time Dry Clean; Package Contain:Top, Bottom and Dupatta", 
    "bullet5": "ðŸ’– Closure Type: Zipper; Occasion Type: Ceremony; Item Length Description: Floor Length; Sleeve Type: Long Sleeve", 
    "bullet6": "", 
    "bullet7": "", 
    "bullet8": "", 
    "Descrip1": "DHVANI ENTERPRISE provides you gHeavy Faux Georgette With Embroidered Work With Sequence ( Semi-Stitched ), Size: Max Up To 48 Inches, Length: Max Up To 52 Inches, Flair: 2.70 MTR.", 
    "Descrip2": "Traditional Indian wear Anarkali gowns and suits for women. This Anarkali gown sophisticated look and enhances the beauty of the women. Which can be worn for functions, festivals, parties, and even weddings also.", 
    "Descrip3": "You will be a center of attraction in the event once you ware it. DHVANI ENTERPRISE brings to you this Anarkali suit. Which are available in pink, wine, brown, Rama, green, white, and black shades of attractive colors and are made from georgette fabric.", 
    "Descrip4": "The Anarkali suit is a suitable choice when it comes to choosing ethnic wear or festive wear for your wardrobe. The gown features a beautiful flair with a floral border enhancing the style of the garment.", 
    "Descrip5": "It comes in semi-stitched and can be altered according to your choice of fit and style.", 
    "Descrip6": "You can pair this attractive gown suit with the ethnic footwear of your choice.", 
    "Descrip7": "Also, you can mix and match ethnic jewelry such as bangles, bracelets, and earrings to go along with it. This combination can be worn for festive occasions as well as occasions such as weddings.", 
    "Descrip8": "", 
    "Descrip9": "", 
    "Descrip10": "", 
    "Descrip11": "", 
    "Descrip12": "",
    "status":"pending" 
    }
      
]


window.onload(
  localStorage.setItem("data",JSON.stringify(data))
)
//dispaly show detail
const uimaker=(data)=> {
  document.getElementById('container').innerHTML = ''; 

  for (let i = 0; i < data.length; i++) {
    let Image = document.createElement("img");
    Image.src = data[i].image1;
    Image.setAttribute("class", "img");  

    let icon = document.createElement("img");
    icon.src = "./PHOTO/wishlist.png";
    icon.setAttribute("class", "icon");
    icon.addEventListener("click", (event) => {
        event.stopPropagation();
     icon.src = "./PHOTO/wishlist-swaping.png"; 

  if (data && data[i]) {
  
    let wishlist = JSON.parse(localStorage.getItem('wishlisted')) || [];

    if (!wishlist.includes(data[i])) {
      wishlist.push(data[i]);
    }
    
    localStorage.setItem('wishlisted', JSON.stringify(wishlist));
  } 
});


    let title = document.createElement("h3"); 
    title.innerHTML = data[i].title;
    title.setAttribute("class", "title");

    let price = document.createElement("p");
    price.innerHTML = `PRICE: â‚¹${data[i].price}`;
    price.setAttribute("class", "price");

    let mrp = document.createElement("p");
    mrp.innerHTML = `MRP: â‚¹${data[i].MRP}`;
    mrp.setAttribute("class", "mrp");

    let atcbutton = document.createElement("button");
    atcbutton.innerHTML = "Add to Cart";
    atcbutton.setAttribute("class", "add-to-cart");
    atcbutton.addEventListener('click', (event) => {
      event.stopPropagation();
      atc(data[i].id); 
    });

    let buynow = document.createElement("button");
    buynow.innerHTML = "Buy Now";
    buynow.setAttribute("class", "buy-now");
    buynow.addEventListener('click', () => {
      localStorage.setItem('buyNowProduct', JSON.stringify(data[i])); 
      window.location.href = './buynow.html';  
    });

    let div2=document.createElement("div")
    div2.append(atcbutton,buynow)
    div2.setAttribute("class","div2")

    let div = document.createElement('div');
    div.setAttribute("class", "box");
    div.setAttribute("id", "box");
    div.append(Image, title, price, div2,icon);
  div.addEventListener("click", ()=>{
    localStorage.setItem('productDetails', JSON.stringify(data[i])); 
    window.open('./productdetail.html'); 
  })

    document.getElementById('container').append(div);
  }
}

uimaker(data) 

//buy now product
const buyn=()=>{ 
  window.open('./buynow.html');}

  //add to cart product

  const atc = (id) => {
    let product = data.find((ele) => ele.id === id);
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
  
    let existingProduct = cart.find((ele) => ele.id === id);
  
    if (existingProduct) {
      let userChoice = window.confirm("This product is already in your cart. Do you want to increase the quantity? Click 'OK' to increase or 'Cancel' to not add it again.");
  
      if (userChoice) {
        existingProduct.quantity = (existingProduct.quantity || 1) + 1;
        localStorage.setItem("cart", JSON.stringify(cart));
        alert("Product quantity has been increased!");
      } else {
        alert("Product not added to the cart again.");
      }
    }
     else {
      product.quantity = 1; 
      cart.push(product);
      localStorage.setItem("cart", JSON.stringify(cart));
      alert("Product has been added to your cart!");
    }
  };

  //sorting 
  //high to low & low to high
sortDropdown.addEventListener('click', function() {
  let sortValue =  document.getElementById('sortDropdown').value;

  if (sortValue === "lth") {
    data.sort((a, b) => parseFloat(a.price) - parseFloat(b.price));//low to high
  } else if (sortValue === "htl") {
    data.sort((a, b) => parseFloat(b.price) - parseFloat(a.price));//high to low
  }
  uimaker(data);
});


//showing subcategory

let getvalues=(id)=>{ 
  return document.getElementById(id);
}

let categoryselect=getvalues("category")
let allcategories=getvalues("all")  
let electronicsselect=getvalues("electronics")
let clothingselect=getvalues("clothing")
let fashionselect=getvalues("Fashion & Apparel")
let foodselect=getvalues("Food & Beverages")
let homeselect=getvalues("Home & Living & kitchenware")
let beautyselect=getvalues("Beauty & Personal Care")
let toysselect=getvalues("Toys & Hobbies")
let Servicesselect=getvalues("Services")
let hardwareselect=getvalues("DIY and Hardware")
let mediaselect=getvalues("Media")


categoryselect.addEventListener("change", () => {
  let selectedcategory = categoryselect.value;
  

  electronicsselect.style.display = "none";
  clothingselect.style.display = "none";
  fashionselect.style.display = "none";
  foodselect.style.display = "none";
  homeselect.style.display = "none";
  beautyselect.style.display = "none";
  toysselect.style.display = "none";
  Servicesselect.style.display = "none";
  hardwareselect.style.display = "none";
  mediaselect.style.display = "none";

  
  if (selectedcategory == "all") {
    uimaker(data); 
  } else {
    if (selectedcategory == "electronics") {
      electronicsselect.style.display = "block";
    } else if (selectedcategory == "clothing") {
      clothingselect.style.display = "block";
    } else if (selectedcategory == "Fashion & Apparel") {
      fashionselect.style.display = "block";
    } else if (selectedcategory == "Food & Beverages") {
      foodselect.style.display = "block";
    } else if (selectedcategory == "Home & Living & kitchenware") {
      homeselect.style.display = "block";
    } else if (selectedcategory == "Beauty & Personal Care") {
      beautyselect.style.display = "block";
    } else if (selectedcategory == "Toys & Hobbies") {
      toysselect.style.display = "block";
    } else if (selectedcategory == "Services") {
      Servicesselect.style.display = "block";
    } else if (selectedcategory == "DIY and Hardware") {
      hardwareselect.style.display = "block";
    } else if (selectedcategory == "Media") {
      mediaselect.style.display = "block";
    }
  }
  debugger
});


// filter category
const filterbycategory = (category) => {
  if (category == "all") {
    uimaker(data);
  } else {
    let temp = data.filter((ele) => ele.category == category);
    console.log(temp);
    
    uimaker(temp);
  }
};

document.getElementById("category").addEventListener("input", () => { 
  let category=document.getElementById("category").value
  console.log(category)
  filterbycategory(category)});


  // Filter by Subcategory

  const filterbysubcategory = (subcategory) => {
    let selectedCategory = document.getElementById('category').value;
    if (subcategory === "" || subcategory === "all") {
      if (selectedCategory === "all") {
        uimaker(data); 
      } else 
      {    let temp = data.filter((ele) => ele.category === selectedCategory); 
        uimaker(temp);
      }
    } else {
      let temp = data.filter((ele) => ele.category === selectedCategory && ele.subcategory === subcategory);
      uimaker(temp);
    }
    
  };

  electronicsselect.addEventListener("input", () => {
    let selectedSubcategory = electronicsselect.value;
    filterbysubcategory(selectedSubcategory);
  });
  
  clothingselect.addEventListener("input", () => {
    let selectedSubcategory = clothingselect.value;
    filterbysubcategory(selectedSubcategory);
  });
  
  fashionselect.addEventListener("input", () => {
    let selectedSubcategory = fashionselect.value;
    filterbysubcategory(selectedSubcategory);
  });
  
  foodselect.addEventListener("input", () => {
    let selectedSubcategory = foodselect.value;
    filterbysubcategory(selectedSubcategory);
  });
  
  homeselect.addEventListener("input", () => {
    let selectedSubcategory = homeselect.value;
    filterbysubcategory(selectedSubcategory);
  });
  
  beautyselect.addEventListener("input", () => {
    let selectedSubcategory = beautyselect.value;
    filterbysubcategory(selectedSubcategory);
  });
  
  toysselect.addEventListener("input", () => {
    let selectedSubcategory = toysselect.value;
    filterbysubcategory(selectedSubcategory);
  });
  
  Servicesselect.addEventListener("input", () => {
    let selectedSubcategory = Servicesselect.value;
    filterbysubcategory(selectedSubcategory);
  });
  
  hardwareselect.addEventListener("input", () => {
    let selectedSubcategory = hardwareselect.value;
    filterbysubcategory(selectedSubcategory);
  });
  
  mediaselect.addEventListener("input", () => {
    let selectedSubcategory = mediaselect.value;
    filterbysubcategory(selectedSubcategory);
  });
  

  //slider of filterbar
document.getElementById("price").addEventListener("input", function() {
  let Price = document.getElementById("price").value;
  document.getElementById("price-value").innerHTML = `upto â‚¹${Price}`;

  let temp = data.filter((product) => parseFloat(product.price) <= parseFloat(Price));
  uimaker(temp); 
});


const filterBycheckbox = () => {
  let filteredData = data; 

  let priceRanges = [];

  if (document.getElementById("price-0-200").checked) {
    priceRanges.push((ele) => parseFloat(ele.price) <= 200);
  }
  if (document.getElementById("price-201-500").checked) {
    priceRanges.push((ele) => parseFloat(ele.price) > 200 && parseFloat(ele.price) <= 500);
  }
  if (document.getElementById("price-501-1000").checked) {
    priceRanges.push((ele) => parseFloat(ele.price) > 500 && parseFloat(ele.price) <= 1000);
  }
  if (document.getElementById("price-1001-1500").checked) {
    priceRanges.push((ele) => parseFloat(ele.price) > 1000 && parseFloat(ele.price) <= 1500);
  }
  if (document.getElementById("price-1501-2000").checked) {
    priceRanges.push((ele) => parseFloat(ele.price) > 1500 && parseFloat(ele.price) <= 2000);
  }
  if (document.getElementById("price-above-2000").checked) {
    priceRanges.push((ele) => parseFloat(ele.price) > 2000);
  }

  if (priceRanges.length > 0) {
    filteredData = filteredData.filter((ele) => 
      priceRanges.some((range) => range(ele))
    );
  }

  uimaker(filteredData);
}

document.getElementById("checkbox-submit").addEventListener("click", filterBycheckbox);


const search = (value) => {
  let temp = data.filter((ele) =>
    ele.title.toLowerCase().includes(value.toLowerCase())
  );
  uimaker(temp);
};

document.getElementById("search").addEventListener("input", () => {
  let value = document.getElementById("search").value;
  search(value);
});