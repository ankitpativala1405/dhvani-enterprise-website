let data = [
  { "id": 0,
    "title": "DHVANI ENTERPRISE Portable Mini Sealing Machine, Handheld Packet Sealer for Food, Snacks, Chips, Fresh Storage, Plastic Bags Sealing Machine,(MULTICOLOR)",
    "price": "199",
    "MRP": "406",
    "category":"Home & Living & kitchenware",
    "subcategory":"kitchenware",
    "sku":"usb sealer machine",
    "image1": "./PHOTO/product photo/0/1.jpg",
    "image2": "./PHOTO/product photo/0/2.jpg", 
    "image3": "./PHOTO/product photo/0/3.jpg", 
    "image4": "./PHOTO/product photo/0/4.jpg",
    "image5": "./PHOTO/product photo/0/5.jpg", 
    "image6": "./PHOTO/product photo/0/6.jpg",
    "image7": "./PHOTO/product photo/0/7.jpg", 
    "image8": "./PHOTO/product photo/0/8.jpg", 
    "bullet1": "ðŸ’– This mini bag sealer is a heat bag sealer, and also a bag opener. You can seal bags easily and keep your food fresh, also with the built-in sharp stainless steel blade to open the bags conveniently. 2-in-1 machine. Enjoy your fresh and crispy snacks.",
    "bullet2": "ðŸ’– built-in With a 400mAh battery, the rechargeable hot bond bag sealer comes with a micro USB cable(included), so there is no need to buy extra AA batteries for this chip sealer, save your money and protect the environment.",
    "bullet3": "ðŸ’– This food bag sealer is suitable for packages of chips, cookies, salad, pet foods, etc., as well as for packages of salad and vacuum bags, a must-have in daily life and kitchen cooking scenarios. Not for cling films, cellophane bags, kraft paper bags, or pure aluminum bags.",
    "bullet4": "ðŸ’– Compared with the old sealer machine, the powerful and efficient heating unit can quickly heat and keep to a working temperature of 0.1s. Turn on the switch, no need to wait, and the sealer directly seals the package firmly.", 
    "bullet5": "ðŸ’– Easy To Place & Portable: With the magnet on the back, the delicate mini bag resealer can be attached to the refrigerator, space-saving in the house and not missing anymore. Only 0.2 pounds is also easy to carry outdoors for picnics, camping trips, etc.", 
    "bullet6": "",
    "bullet7": "",
    "bullet8": "", 
    "Descrip1": "The vacuum sealing process removes all of the air from your bags or containers so that you can preserve food longer without worrying about freezer burn ruining your favorite foods! The bag sealer also has the switch button function and supports USB charging! Never worry about the unsuitable battery and unstable voltage again.", 
    "Descrip2": "The kitchen gadgets can resist food waste. It helps you store the remaining snacks, food, cookies, pet food, sauce bags, and nuts. This plastic sealer is suitable for chip bags, vacuum sealer bags, cookie bags, pet food bags, and other PP, PE, and PVC bags.", 
    "Descrip3": "1.Fully charge the battery before use.<br>Plug the portable heat sealer into the power cord to starr charging. When charging, the indicator red light will be on for a long time, and when fully charged, the indicatior red ligjt will be off. At this point you can start using the product.",
    "Descrip4": "2. Open switch button.<br>Toggle the push button forward to turn on the machine, the indicator light blue light is long.", 
    "Descrip5": "3.Preheat the machine.<br>Before the first use, it needs to be pressed for 5 seconds to warm up, and then it can be used. Please note that it only needs to be preheated before the first use, and it can be used directly afterwards.",
    "Descrip6": "4.Press to seal the bag<br>Then simply press the knob and make it move equably. along the edge of any bag and it's sealed airtight.", 
    "Descrip7": "And it have hidden blade. Put the bag into the opening of the sealing machine; press down the button to open the bag and slide to the right to complete the opening.", 
    "Descrip8": "",
    "Descrip9": "", 
    "Descrip10": "",
    "Descrip11": "", 
    "Descrip12": "" },
    { 
    "id": 1, 
    "title": "DHVANI ENTERPRISE Women's Faux Georgette Stitched Top With Unstitched Santoon Bottom and Dupatta Full Sleeve Embroidered Anarkali Gown", 
    "price": "599", 
    "MRP": "2199", 
    "category": "clothing", 
    "subcategory": "gown", 
    "sku":"Anarkali gown(parrot green)",
    "image1": "./PHOTO/product photo/1/1.jpg", 
    "image2": "./PHOTO/product photo/1/2.jpg", 
    "image3": "./PHOTO/product photo/1/3.jpg", 
    "image4": "./PHOTO/product photo/1/4.jpg", 
    "image5": "./PHOTO/product photo/1/5.jpg", 
    "image6": "./PHOTO/product photo/1/6.jpg", 
    "image7": "./PHOTO/product photo/1/7.jpg", 
    "image8": "./PHOTO/product photo/1/8.jpg", 
    "bullet1": "ðŸ’– Top: Heavy Faux Georgette With Embroidered Work With Stone, Size: Max Up To 48 Inches Length: Max Up To 52 Inches", 
    "bullet2": "ðŸ’– Bottom: Heavy Santoon, Length: 2 MTR, Type: Unstitched", 
    "bullet3": "ðŸ’– Dupatta: Heavy Butterfly Net With Embroidery Work With Latkan, Size: 2.20 MTR, Sleeve; Faux Georgette With Embroidered Work", 
    "bullet4": "ðŸ’– Type: Semi Stitched, Wash Care: First Time Dry Clean; Package Contain:Top, Bottom and Dupatta", 
    "bullet5": "ðŸ’– Closure Type: Zipper; Occasion Type: Ceremony; Item Length Description: Floor Length; Sleeve Type: Long Sleeve", 
    "bullet6": "", 
    "bullet7": "", 
    "bullet8": "", 
    "Descrip1": "DHVANI ENTERPRISE provides you gHeavy Faux Georgette With Embroidered Work With Sequence ( Semi-Stitched ), Size: Max Up To 48 Inches, Length: Max Up To 52 Inches, Flair: 2.70 MTR.", 
    "Descrip2": "Traditional Indian wear Anarkali gowns and suits for women. This Anarkali gown sophisticated look and enhances the beauty of the women. Which can be worn for functions, festivals, parties, and even weddings also.", 
    "Descrip3": "You will be a center of attraction in the event once you ware it. DHVANI ENTERPRISE brings to you this Anarkali suit. Which are available in pink, wine, brown, Rama, green, white, and black shades of attractive colors and are made from georgette fabric.", 
    "Descrip4": "The Anarkali suit is a suitable choice when it comes to choosing ethnic wear or festive wear for your wardrobe. The gown features a beautiful flair with a floral border enhancing the style of the garment.", 
    "Descrip5": "It comes in semi-stitched and can be altered according to your choice of fit and style.", 
    "Descrip6": "You can pair this attractive gown suit with the ethnic footwear of your choice.", 
    "Descrip7": "Also, you can mix and match ethnic jewelry such as bangles, bracelets, and earrings to go along with it. This combination can be worn for festive occasions as well as occasions such as weddings.", 
    "Descrip8": "", 
    "Descrip9": "", 
    "Descrip10": "", 
    "Descrip11": "", 
    "Descrip12": "" 
    }
      
]

let subcategories = {
  "electronics": ["smartphones", "computers", "TVs", "audio equipment", "accessories"],
  "clothing":["gown","kurtis","kurtas","tunic","kurta set","kurti set","saree"],
  "Fashion & Apparel": ["footwear", "accessories for men", "accessories for women", "accessories for kids","accessories for children"],
  "Food & Beverages": ["groceries", "snacks", "drinks", "other consumables"],
  "Home & Living & kitchenware": ["furniture", "home decor", "appliances", "other items","kitchenware"],
  "Beauty & Personal Care": ["makeup", "skincare", "hair care","cosmetics", "personal care","body care", "fragrances","perfumes","fragrances for women", "fragrances for kids","fragrances for children","fragrances for men","fragrances for teenagers","fragrances for adults","make for women","make for men","makeup products",],
  "Toys & Hobbies": ["toys", "games", "collectibles", "hobby-related"],
  "Services": ["software subscriptions", "online courses", "non-physical products"],
  "DIY and Hardware": ["tools", "home repairs", "construction"],
  "Media": ["books", "music", "movies", "other media"]
};


const uimaker=()=> {
  document.getElementById('container').innerHTML = ''; 

  for (let i = 0; i < data.length; i++) {
    let Image = document.createElement("img");
    Image.src = data[i].image1;
    Image.setAttribute("class", "img");  

    let title = document.createElement("h3"); 
    title.innerHTML = data[i].title;
    title.setAttribute("class", "title");

    let price = document.createElement("p");
    price.innerHTML = `PRICE: â‚¹${data[i].price}`;
    price.setAttribute("class", "price");

    let mrp = document.createElement("p");
    mrp.innerHTML = `MRP: â‚¹${data[i].MRP}`;
    mrp.setAttribute("class", "mrp");

    let atcbutton = document.createElement("button");
    atcbutton.innerHTML = "Add to Cart";
    atcbutton.setAttribute("class", "add-to-cart");
    atcbutton.addEventListener('click', () => {
      atc(data[i].id); 
    });

    let buynow = document.createElement("button");
    buynow.innerHTML = "Buy Now";
    buynow.setAttribute("class", "buy-now");
    buynow.addEventListener('click', () => {
     
      localStorage.setItem('buyNowProduct', JSON.stringify(data[i])); 
      window.location.href = './buynow.html';  
    });

    let div = document.createElement('div');
    div.setAttribute("class", "box");
    div.setAttribute("id", "box");
    div.append(Image, title, price, atcbutton, buynow);
    // div.addEventListener("click",productdetail(data[i].id))

    document.getElementById('container').append(div);
  }
}

uimaker() 
const buyn=()=>{ 
  window.open('./buynow.html');}

  const atc = (id) => {
    let product = data.find((ele) => ele.id === id);
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
  
    // Check if the product is already in the cart
    let existingProduct = cart.find((ele) => ele.id === id);
  
    if (existingProduct) {
      // Ask user if they want to increase quantity or not add it again
      let userChoice = window.confirm("This product is already in your cart. Do you want to increase the quantity? Click 'OK' to increase or 'Cancel' to not add it again.");
  
      if (userChoice) {
        // Increase quantity (add 1 to the quantity)
        existingProduct.quantity = (existingProduct.quantity || 1) + 1;
        localStorage.setItem("cart", JSON.stringify(cart));
        alert("Product quantity has been increased!");
      } else {
        alert("Product not added to the cart again.");
      }
    } else {
      // If product doesn't exist in the cart, add it to the cart
      product.quantity = 1; // Set default quantity as 1
      cart.push(product);
      localStorage.setItem("cart", JSON.stringify(cart));
      alert("Product has been added to your cart!");
    }
  };
  
sortDropdown.addEventListener('click', function() {
  let sortValue =  document.getElementById('sortDropdown').value;

  if (sortValue === "asc") {
    data.sort((a, b) => parseFloat(a.price) - parseFloat(b.price));//low to high
  } else if (sortValue === "desc") {
    data.sort((a, b) => parseFloat(b.price) - parseFloat(a.price));//high to low
  }
  uimaker();
});

const productdetail = (id) => {
  const product = data.find(item => item.id === id); 
  localStorage.setItem('productDetails', JSON.stringify(product)); 
  window.open('./productdetail.html'); 
};

let priceRange = document.getElementById('price');
let priceValue = document.getElementById('price-value');

priceRange.addEventListener('input', function() {
    priceValue.textContent = `upto ${priceRange.value}`
});


let getvalues=(id)=>{ 
  return document.getElementById(id);
}



let categorySelect = document.getElementById("category");
let subcategorySelect = document.getElementById("subcategory");

categorySelect.addEventListener("change", function () {
  let selectedCategory = categorySelect.value;

  subcategorySelect.innerHTML = '<option value="">Select Subcategory</option>';

  if (selectedCategory) {
      let options = subcategories[selectedCategory] || [];
      
      subcategorySelect.style.display = "block"; 

      for (let i = 0; i < options.length; i++) {
        let option = document.createElement("option");
        option.value = options[i]; 
        option.textContent = options[i]; 
        subcategorySelect.appendChild(option);
    }

      filterByCategory(selectedCategory);
  } else {
      subcategorySelect.style.display = "none"; 
      uimaker(); 
  }
});

function filterByCategory(category) {
  let filteredData = data.filter(product => product.category === category);
  uimaker(filteredData);
}

const filterbysubcategory = () => {
  let selectedSubcategory = subcategorySelect.value;

  if (selectedSubcategory === "") {
      uimaker(); 
  } else {
      let filteredData = data.filter((ele) => ele.subcategory === selectedSubcategory);
      uimaker(filteredData);
  }
};
document.getElementById("subcategory").addEventListener("change", filterbysubcategory);



const filterbyprice = () => {
  let priceOffilteredData = parseFloat(document.getElementById("price").value); 

  let filteredData = data.filter((ele) => parseFloat(ele.price) <= priceOffilteredData);

  uimaker(filteredData);
};
priceRange.addEventListener('input', filterbyprice);


function getSelectedFilters() {
  let selectedRanges = [];
  let checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
  checkboxes.forEach(checkbox => {
      selectedRanges.push(checkbox.nextSibling.textContent.trim());
  });
  return selectedRanges;
}

document.getElementById("checkbox-submit").addEventListener('click', function () {
  let selectedRanges = getSelectedFilters();  
  let filteredData = data;

  if (selectedRanges.length > 0) {
    filteredData = data.filter(product => {
      return selectedRanges.some(range => {
        switch (range) {
          case '0-200 â‚¹':
            return parseFloat(product.price) >= 0 && parseFloat(product.price) <= 200;
          case '201-500 â‚¹':
            return parseFloat(product.price) > 200 && parseFloat(product.price) <= 500;
          case '501-1000 â‚¹':
            return parseFloat(product.price) > 500 && parseFloat(product.price) <= 1000;
          case '1001-1500 â‚¹':
            return parseFloat(product.price) > 1000 && parseFloat(product.price) <= 1500;
          case '1501-2000 â‚¹':
            return parseFloat(product.price) > 1500 && parseFloat(product.price) <= 2000;
          case 'Above 2000 â‚¹':
            return parseFloat(product.price) > 2000;
          default:
            return false;
        }
      });
    });
  }
  uimaker(filteredData);
});


document.getElementById("checkbox-reset").addEventListener('click', function () {

  let checkboxes = document.querySelectorAll('input[type="checkbox"]');
  checkboxes.forEach(checkbox => checkbox.checked = false);

  uimaker(data);
});
